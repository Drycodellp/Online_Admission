var __awaiter=this&&this.__awaiter||function(e,t,r,a){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{l(a.next(e))}catch(t){s(t)}}function n(e){try{l(a["throw"](e))}catch(t){s(t)}}function l(e){e.done?r(e.value):i(e.value).then(o,n)}l((a=a.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,i,s,o;return o={next:n(0),throw:n(1),return:n(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function n(e){return function(t){return l([e,t])}}function l(o){if(a)throw new TypeError("Generator is already executing.");while(r)try{if(a=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(n){o=[6,n];i=0}finally{a=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};System.register(["./p-4572adfe.system.js","./p-38dab039.system.js","./p-506cc8db.system.js","./p-31e0691e.system.js"],(function(e){"use strict";var t,r,a;return{setters:[function(e){t=e.r;r=e.h},function(){},function(){},function(e){a=e.t}],execute:function(){var i="#middle_gap{width:45%}ion-img{width:100%}#science,#commerce,#arts{display:none}.select_stream div{display:-ms-inline-flexbox;display:inline-flex;margin-right:16px}.select_stream div ion-checkbox{margin:0;margin-right:3px}ion-radio-group{display:-ms-inline-flexbox;display:inline-flex}ion-radio-group div{margin:4px}ion-radio-group ion-label,.select_stream ion-label{font-size:17px;margin-left:3px}";var s=e("app_application_section",function(){function e(e){t(this,e);this.streams=[]}e.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,a;return __generator(this,(function(i){switch(i.label){case 0:this.id=new URL(window.location.href).searchParams.get("id");return[4,fetch("http://104.43.21.203:1337/teachers/"+this.id)];case 1:e=i.sent();t=this;return[4,e.json()];case 2:t.schoolDetails=i.sent();this.resValue=this.schoolDetails.school_available_subject;console.log(this.resValue);r=window.localStorage.getItem("user_details");a=JSON.parse(r);this.student_name=a[0].s_name;this.logo=a[0].s_image;return[2]}}))}))};e.prototype.selSub=function(e,t,r){switch(t){case"firstLang":{this.firstLang=r;break}case"secLang":{this.secLang=r;break}case"science1":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set1row1=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set1row1="";e.target.ariaChecked="false";break}}case"science2":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set1row2=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set1row2="";e.target.ariaChecked="false";break}}case"science3":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set1row3=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set1row3="";e.target.ariaChecked="false";break}}case"science4":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set1row4=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set1row4="";e.target.ariaChecked="false";break}}case"science5":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set1row5=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set1row5="";e.target.ariaChecked="false";break}}case"science6":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set1row6=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set1row6="";e.target.ariaChecked="false";break}}case"commerce1":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set2row1=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set2row1="";e.target.ariaChecked="false";break}}case"commerce2":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set2row2=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set2row2="";e.target.ariaChecked="false";break}}case"commerce3":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set2row3=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set2row3="";e.target.ariaChecked="false";break}}case"commerce4":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set2row4=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set2row4="";e.target.ariaChecked="false";break}}case"commerce5":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set2row5=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set2row5="";e.target.ariaChecked="false";break}}case"commerce6":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set2row6=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set2row6="";e.target.ariaChecked="false";break}}case"arts1":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row1=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row1="";e.target.ariaChecked="false";break}}case"arts2":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row2=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row2="";e.target.ariaChecked="false";break}}case"arts3":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row3=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row3="";e.target.ariaChecked="false";break}}case"arts4":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row4=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row4="";e.target.ariaChecked="false";break}}case"arts5":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row5=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row5="";e.target.ariaChecked="false";break}}case"arts6":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row6=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row6="";e.target.ariaChecked="false";break}}case"arts7":{if(e.target.ariaChecked=="false"){e.target.classList.add("radio-checked");this.set3row7=r;e.target.ariaChecked="true";break}else if(e.target.ariaChecked=="true"){e.target.classList.remove("radio-checked");this.set3row7="";e.target.ariaChecked="false";break}}}};e.prototype.selStream=function(e,t){console.log(e,t.target.checked);if(!t.target.checked){this.streams.push(e);document.getElementById(e).style.display="block"}else{if(this.streams.length>0){for(var r=0;r<this.streams.length;r++){var a=this.streams[r];if(a==e){this.streams.splice(this.streams.indexOf(a),1);document.getElementById(e).style.display="none"}}}}};e.prototype.applyForTheSchool=function(){var e=window.localStorage.getItem("user_details");var t=JSON.parse(e);var r=t[0].id;var a=t[0].s_name;var i=t[0].s_sch_name;var s=Number(t[0].s_first_lang_no)+Number(t[0].s_sec_lang_no)+Number(t[0].s_math_no)+Number(t[0].s_phy_sc_no)+Number(t[0].s_life_sc_no)+Number(t[0].s_history_no)+Number(t[0].s_geography_no);var o=(s/7).toFixed(3);if(this.id&&r&&this.streams.length>0&&this.firstLang&&this.secLang){for(var n=0;n<this.streams.length;n++){var l=this.streams[n];if(l=="science"){var c=0;if(this.set1row1){c+=1}if(this.set1row2){c+=1}if(this.set1row3){c+=1}if(this.set1row4){c+=1}if(this.set1row5){c+=1}if(this.set1row6){c+=1}if(c==4){var u={first_language:this.firstLang,second_language:this.secLang,others:(" "+this.set1row1+" "+this.set1row2+" "+this.set1row3+" "+this.set1row4+" "+this.set1row5+" "+this.set1row6).replace(/ undefined/gi,"")};this.sendRequest(u,r,a,i,s,o,l)}else{this.presentToast("You have to chose 4 subjects")}}else if(l=="commerce"){var c=0;if(this.set2row1){c+=1}if(this.set2row2){c+=1}if(this.set2row3){c+=1}if(this.set2row4){c+=1}if(this.set2row5){c+=1}if(this.set2row6){c+=1}if(c==4){var u={first_language:this.firstLang,second_language:this.secLang,others:(" "+this.set2row1+" "+this.set2row2+" "+this.set2row3+" "+this.set2row4+" "+this.set2row5+" "+this.set2row6).replace(/ undefined/gi,"")};this.sendRequest(u,r,a,i,s,o,l)}}else if(l=="arts"){var c=0;if(this.set3row1){c+=1}if(this.set3row2){c+=1}if(this.set3row3){c+=1}if(this.set3row4){c+=1}if(this.set3row5){c+=1}if(this.set3row6){c+=1}if(this.set3row7){c+=1}if(c==4){var u={first_language:this.firstLang,second_language:this.secLang,others:(" "+this.set3row1+" "+this.set3row2+" "+this.set3row3+" "+this.set3row4+" "+this.set3row5+" "+this.set3row6+" "+this.set3row7).replace(/ undefined/gi,"")};this.sendRequest(u,r,a,i,s,o,l)}}}}else{this.presentToast("Sorry can't process your request")}};e.prototype.sendRequest=function(e,t,r,a,i,s,o){return __awaiter(this,void 0,void 0,(function(){var n,l,c;return __generator(this,(function(u){switch(u.label){case 0:n={student_id:t.toString(),student_name:r,student_school:a,student_total:i,student_percent:s,school_id:this.id.toString(),stream:o,subjects:e};return[4,fetch("http://104.43.21.203:1337/applicants",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})];case 1:l=u.sent();return[4,l.json()];case 2:c=u.sent();console.log(c);if(c&&c.id){this.presentToast("You application successfully received")}else{this.presentToast("There is some error")}return[2]}}))}))};e.prototype.presentToast=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){switch(r.label){case 0:return[4,a.create({message:e,duration:2e3})];case 1:t=r.sent();t.present();return[2]}}))}))};e.prototype.logout=function(){window.localStorage.removeItem("user_details");window.location.href="/"};e.prototype.render=function(){var e=this;return[r("ion-content",null,r("div",{class:"header_sec"},r("ion-img",{src:"assets/icon/logo.png"}),r("h1",null,this.student_name),r("ion-button",{class:"log_out",onClick:function(){return e.logout()},color:"secondary"},"Log Out"),r("img",{class:"sch_logo",src:this.logo}),r("div",{class:"search_sec"},r("ion-searchbar",{placeholder:"Search by school or student name"}),r("h2",null,"No pressure of form fillup. Hassle free admission"))),r("ion-card",{class:"main_body"},r("ion-grid",{class:"sub_sel"},r("h3",null,"Select Subjects"),r("ion-row",null,r("ion-col",{size:"3"},r("h4",null,"First Language")),r("ion-col",{size:"9",class:"lang_col"},r("ion-radio-group",null,this.resValue.first_language.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"firstLang",t)}}),r("ion-label",null,t))}))))),r("ion-row",null,r("ion-col",{size:"3"},r("h4",null,"Second Language")),r("ion-col",{size:"9",class:"lang_col"},r("ion-radio-group",null,this.resValue.second_language.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"secLang",t)}}),r("ion-label",null,t))}))))),r("ion-row",null,r("ion-list",{class:"select_stream"},r("h4",null,"Select Stream(select one or more)"),r("div",null,r("div",null,r("ion-checkbox",{slot:"start",onClick:function(t){return e.selStream("science",t)}}),r("ion-label",null,"Science")),r("div",null,r("ion-checkbox",{slot:"start",onClick:function(t){return e.selStream("commerce",t)}}),r("ion-label",null,"Commerce")),r("div",null,r("ion-checkbox",{slot:"start",onClick:function(t){return e.selStream("arts",t)}}),r("ion-label",null,"Arts"))))),r("ion-row",{id:"science"},r("ion-col",{size:"3"},r("h4",null,"Science")),r("ion-col",{size:"9"},r("ion-row",null,r("ion-radio-group",null,this.resValue.set1.row1.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"science1",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set1.row2.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"science2",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set1.row3.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"science3",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set1.row4.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"science4",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set1.row5.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"science5",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set1.row6.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"science6",t)}}),r("ion-label",null,t))})))))),r("ion-row",{id:"commerce"},r("ion-col",{size:"3"},r("h4",null,"Commerce")),r("ion-col",{size:"9"},r("ion-row",null,r("ion-radio-group",null,this.resValue.set2.row1.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"commerce1",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set2.row2.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"commerce2",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set2.row3.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"commerce3",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set2.row4.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"commerce4",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set2.row5.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"commerce5",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set2.row6.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"commerce6",t)}}),r("ion-label",null,t))})))))),r("ion-row",{id:"arts"},r("ion-col",{size:"3"},r("h4",null,"Arts")),r("ion-col",{size:"9"},r("ion-row",null,r("ion-radio-group",null,this.resValue.set3.row1.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts1",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set3.row2.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts2",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set3.row3.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts3",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set3.row4.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts4",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set3.row5.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts5",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",null,this.resValue.set3.row6.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts6",t)}}),r("ion-label",null,t))})))),r("ion-row",null,r("ion-radio-group",{id:"arts7"},this.resValue.set3.row7.map((function(t){return r("div",null,r("ion-radio",{slot:"start",onClick:function(r){return e.selSub(r,"arts7",t)}}),r("ion-label",null,t))}))))))),r("ion-button",{expand:"full",onClick:function(){return e.applyForTheSchool()}},"Send Application")))]};return e}());s.style=i}}}));