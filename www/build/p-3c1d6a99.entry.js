import{r as e,h as i}from"./p-a0aececd.js";import"./p-d34b8ceb.js";import"./p-7261e130.js";import{t as s}from"./p-ad4e3420.js";const n=class{constructor(i){e(this,i),this.fileReader=new FileReader}changeValue(e){let i=e.target.value;switch(e.target.name){case"s_id":this.s_id=i;break;case"s_pass":this.s_pass=i;break;case"s_name":this.s_name=i;break;case"s_guad_name":this.s_guad_name=i;break;case"s_res_address":this.s_res_address=i;break;case"s_res_pin":this.s_res_pin=i;break;case"s_sch_name":this.s_sch_name=i;break;case"s_sch_address":this.s_sch_address=i;break;case"s_sch_pin":this.s_sch_pin=i;break;case"s_reg_number":this.s_reg_number=i;break;case"s_cast":this.s_cast=i;break;case"s_ph_number":this.s_ph_number=i;break;case"s_alt_ph_number":this.s_alt_ph_number=i;break;case"s_email":this.s_email=i;break;case"s_password":this.s_password=i;break;case"s_con_password":this.s_con_password=i;break;case"s_first_lang_no":this.s_first_lang_no=i;break;case"s_sec_lang_no":this.s_sec_lang_no=i;break;case"s_math_no":this.s_math_no=i;break;case"s_phy_sc_no":this.s_phy_sc_no=i;break;case"s_life_sc_no":this.s_life_sc_no=i;break;case"s_history_no":this.s_history_no=i;break;case"s_geography_no":this.s_geography_no=i;break;case"s_op_sub_no":this.s_op_sub_no=i}}openImgInput(e){document.getElementById(e).click()}setResultImg(e){if("image/jpeg"==e.target.files[0].type||"application/pdf"==e.target.files[0].type){let i=e.target.files[0];this.fileReader.onloadend=()=>{this.s_result_img=this.fileReader.result},this.fileReader.readAsDataURL(i)}else this.presentToast("Please select an image file(jpg or pdf)")}setCastImg(e){if("image/jpeg"==e.target.files[0].type||"application/pdf"==e.target.files[0].type){let i=e.target.files[0];this.fileReader.onloadend=()=>{this.s_cast_cert_img=this.fileReader.result},this.fileReader.readAsDataURL(i)}else this.presentToast("Please select an image file(jpg or pdf)")}setStudentImg(e){if("image/jpeg"==e.target.files[0].type||"image/png"==e.target.files[0].type){let i=e.target.files[0];this.fileReader.onloadend=()=>{this.s_image=this.fileReader.result},this.fileReader.readAsDataURL(i)}else this.presentToast("Please select an image file(jpg or png)")}async studentLogin(){if(this.s_id&&this.s_pass){let e=await fetch("http://104.43.21.203:1337/students?s_reg_number="+this.s_id),i=await e.json();i&&i.length>0?this.s_pass==i[0].s_password?(this.presentToast("You are successfully logged in"),window.location.assign("/student-dashboard"),window.localStorage.setItem("user_details",JSON.stringify(i))):this.presentToast("Wrong password"):i&&0==i.length&&this.presentToast("You are not registered")}}async studentRegistration(){if(this.s_name&&this.s_guad_name&&this.s_res_address&&this.s_res_pin&&this.s_sch_name&&this.s_sch_address&&this.s_sch_pin&&this.s_reg_number&&this.s_cast&&this.s_ph_number&&this.s_password&&this.s_first_lang_no&&this.s_sec_lang_no&&this.s_math_no&&this.s_phy_sc_no&&this.s_life_sc_no&&this.s_history_no&&this.s_geography_no&&this.s_op_sub_no&&this.s_result_img&&this.s_cast_cert_img&&this.s_image)if(this.s_password==this.s_con_password){let e=await fetch("http://104.43.21.203:1337/students?s_reg_number="+this.s_reg_number),i=await e.json();if(i&&0==i.length){let e={s_name:this.s_name,s_guad_name:this.s_guad_name,s_res_address:this.s_res_address,s_res_pin:this.s_res_pin.toString(),s_sch_name:this.s_sch_name,s_sch_address:this.s_sch_address,s_sch_pin:this.s_sch_pin.toString(),s_reg_number:this.s_reg_number,s_cast:this.s_cast,s_ph_number:this.s_ph_number.toString(),s_alt_ph_number:this.s_alt_ph_number?this.s_alt_ph_number.toString():null,s_email:this.s_email,s_password:this.s_password,s_first_lang_no:this.s_first_lang_no.toString(),s_sec_lang_no:this.s_sec_lang_no.toString(),s_math_no:this.s_math_no.toString(),s_phy_sc_no:this.s_phy_sc_no.toString(),s_life_sc_no:this.s_life_sc_no.toString(),s_history_no:this.s_history_no.toString(),s_geography_no:this.s_geography_no.toString(),s_op_sub_no:this.s_op_sub_no.toString(),s_result_img:this.s_result_img,s_cast_cert_img:this.s_cast_cert_img,s_image:this.s_image},i=await fetch("http://104.43.21.203:1337/students",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),s=await i.json();console.log("response",s),s&&s.length>0?(this.presentToast("You are successfully registered"),window.location.assign("/student-dashboard"),window.localStorage.setItem("user_details",JSON.stringify(s))):this.presentToast("There is some error")}else i&&i.length>0&&this.presentToast("Candidate with this registration number already exist")}else this.presentToast("Password does not match Confirm Password");else this.presentToast("Please input the required fields properlly")}segmentChange(e){"s_login"==e.target.value?(document.getElementById("reg_form").style.display="none",document.getElementById("login_form").style.display="block"):"s_reg"==e.target.value&&(document.getElementById("login_form").style.display="none",document.getElementById("reg_form").style.display="block")}async presentToast(e){(await s.create({message:e,duration:2e3})).present()}render(){return[i("ion-content",null,i("div",{class:"header_sec"},i("ion-img",{src:"assets/icon/logo.png"}),i("ion-button",{color:"secondary",href:"/school-registration"},"Register or Login Your School"),i("div",{class:"search_sec"},i("ion-searchbar",{placeholder:"Search by school or student name"}),i("h2",null,"No pressure of form fillup. Hassle free admission"))),i("ion-card",{class:"main_body"},i("ion-segment",{onIonChange:e=>this.segmentChange(e),value:"s_login"},i("ion-segment-button",{value:"s_login"},i("ion-label",null,"LOGIN")),i("ion-segment-button",{value:"s_reg"},i("ion-label",null,"REGISTRATION"))),i("div",{id:"login_form"},i("ion-list",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Registration Number"),i("ion-input",{name:"s_id",onInput:e=>this.changeValue(e),placeholder:"e.g. SAHEB123456",type:"text"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Password"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_pass",placeholder:"********",type:"password"}))),i("ion-button",{expand:"full",onClick:()=>this.studentLogin()},"SUBMIT")),i("div",{id:"reg_form"},i("ion-list",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Student Name"),i("ion-input",{name:"s_name",onInput:e=>this.changeValue(e),placeholder:"e.g. Saheb Maity",type:"text"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Guardian Name"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_guad_name",placeholder:"e.g. Samrat Maity",type:"text"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Rasidential Address"),i("ion-textarea",{onInput:e=>this.changeValue(e),name:"s_res_address",placeholder:"e.g. Nopkala, Chandrakona Road"})),i("ion-item",null,i("ion-label",{position:"stacked"},"PIN Code"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_res_pin",placeholder:"e.g. 123456",type:"number"})),i("ion-item",null,i("ion-label",{position:"stacked"},"School Name"),i("ion-input",{name:"s_sch_name",onInput:e=>this.changeValue(e),placeholder:"e.g. Nopkala High School",type:"text"})),i("ion-item",null,i("ion-label",{position:"stacked"},"School Address"),i("ion-textarea",{onInput:e=>this.changeValue(e),name:"s_sch_address",placeholder:"e.g. Nopkala, Chandrokana Road"})),i("ion-item",null,i("ion-label",{position:"stacked"},"School PIN Code"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_sch_pin",placeholder:"e.g. 123456",type:"number"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Madhyamik Registration Number"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_reg_number",placeholder:"e.g. 11111111111",type:"text"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Cast"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_cast",placeholder:"e.g. OBC",type:"text"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Phone Number"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_ph_number",placeholder:"e.g. 1234567890",type:"number"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Alternative Phone Number(Optional)"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_alt_ph_number",placeholder:"e.g. 1234567890",type:"number"})),i("ion-item",null,i("ion-label",{position:"stacked"},"E-mail ID(Optional)"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_email",placeholder:"e.g. sahebmaity90@gmail.com",type:"email"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Create Password(Min 6 carecter)"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_password",placeholder:"********",type:"password"})),i("ion-item",null,i("ion-label",{position:"stacked"},"Confirm Password"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_con_password",placeholder:"********",type:"password"}))),i("ion-grid",null,i("h3",null,"Subject wise number"),i("ion-row",null,i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"1st Language"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_first_lang_no",placeholder:"e.g. 91",type:"number"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"2nd Language"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_sec_lang_no",placeholder:"e.g. 91",type:"number"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Mathametics"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_math_no",placeholder:"e.g. 91",type:"number"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Physical Science"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_phy_sc_no",placeholder:"e.g. 91",type:"number"})))),i("ion-row",null,i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Life Science"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_life_sc_no",placeholder:"e.g. 91",type:"number"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"History"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_history_no",placeholder:"e.g. 91",type:"number"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Geography"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_geography_no",placeholder:"e.g. 91",type:"number"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Physical Education(optional sub)"),i("ion-input",{onInput:e=>this.changeValue(e),name:"s_op_sub_no",placeholder:"e.g. 91",type:"number"}))))),i("ion-grid",null,i("h3",null,"Documents Upload"),i("ion-row",null,i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Passport Size Photo"),i("ion-img",{class:"upload_img",onClick:()=>this.openImgInput("student_img"),src:"assets/icon/uploadIcon.jpg"}),i("input",{type:"file",id:"student_img",onChange:e=>this.setStudentImg(e),accept:"image/png, image/jpeg"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Madhyamik Result"),i("ion-img",{class:"upload_img",onClick:()=>this.openImgInput("result_img"),src:"assets/icon/uploadIcon.jpg"}),i("input",{type:"file",id:"result_img",onChange:e=>this.setResultImg(e),accept:"application/pdf, image/jpeg"}))),i("ion-col",null,i("ion-item",null,i("ion-label",{position:"stacked"},"Cast Certificate"),i("ion-img",{class:"upload_img",onClick:()=>this.openImgInput("cast_cert_img"),src:"assets/icon/uploadIcon.jpg"}),i("input",{type:"file",id:"cast_cert_img",onChange:e=>this.setCastImg(e),accept:"application/pdf, image/jpeg"}))))),i("ion-button",{expand:"full",onClick:()=>this.studentRegistration()},"Register"))))]}};n.style="#result_img,#cast_cert_img,#student_img{display:none}#reg_form{display:none}ion-grid h3{margin:0}";export{n as app_school_register}