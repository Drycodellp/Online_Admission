var __awaiter=this&&this.__awaiter||function(e,n,t,s){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,o){function a(e){try{l(s.next(e))}catch(n){o(n)}}function r(e){try{l(s["throw"](e))}catch(n){o(n)}}function l(e){e.done?t(e.value):i(e.value).then(a,r)}l((s=s.apply(e,n||[])).next())}))};var __generator=this&&this.__generator||function(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,i,o,a;return a={next:r(0),throw:r(1),return:r(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(n){return l([e,n])}}function l(a){if(s)throw new TypeError("Generator is already executing.");while(t)try{if(s=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:t.label++;return{value:a[1],done:false};case 5:t.label++;i=a[1];a=[0];continue;case 7:a=t.ops.pop();t.trys.pop();continue;default:if(!(o=t.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){t.label=a[1];break}if(a[0]===6&&t.label<o[1]){t.label=o[1];o=a;break}if(o&&t.label<o[2]){t.label=o[2];t.ops.push(a);break}if(o[2])t.ops.pop();t.trys.pop();continue}a=n.call(e,t)}catch(r){a=[6,r];i=0}finally{s=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-4572adfe.system.js","./p-38dab039.system.js","./p-506cc8db.system.js","./p-31e0691e.system.js"],(function(e){"use strict";var n,t,s;return{setters:[function(e){n=e.r;t=e.h},function(){},function(){},function(e){s=e.t}],execute:function(){var i="#result_img,#cast_cert_img,#student_img{display:none}#reg_form{display:none}ion-grid h3{margin:0}";var o=e("app_school_register",function(){function e(e){n(this,e);this.fileReader=new FileReader}e.prototype.changeValue=function(e){var n=e.target.value;switch(e.target.name){case"s_id":{this.s_id=n;break}case"s_pass":{this.s_pass=n;break}case"s_name":{this.s_name=n;break}case"s_guad_name":{this.s_guad_name=n;break}case"s_res_address":{this.s_res_address=n;break}case"s_res_pin":{this.s_res_pin=n;break}case"s_sch_name":{this.s_sch_name=n;break}case"s_sch_address":{this.s_sch_address=n;break}case"s_sch_pin":{this.s_sch_pin=n;break}case"s_reg_number":{this.s_reg_number=n;break}case"s_cast":{this.s_cast=n;break}case"s_ph_number":{this.s_ph_number=n;break}case"s_alt_ph_number":{this.s_alt_ph_number=n;break}case"s_email":{this.s_email=n;break}case"s_password":{this.s_password=n;break}case"s_con_password":{this.s_con_password=n;break}case"s_first_lang_no":{this.s_first_lang_no=n;break}case"s_sec_lang_no":{this.s_sec_lang_no=n;break}case"s_math_no":{this.s_math_no=n;break}case"s_phy_sc_no":{this.s_phy_sc_no=n;break}case"s_life_sc_no":{this.s_life_sc_no=n;break}case"s_history_no":{this.s_history_no=n;break}case"s_geography_no":{this.s_geography_no=n;break}case"s_op_sub_no":{this.s_op_sub_no=n;break}}};e.prototype.openImgInput=function(e){document.getElementById(e).click()};e.prototype.setResultImg=function(e){var n=this;if(e.target.files[0].type=="image/jpeg"||e.target.files[0].type=="application/pdf"){var t=e.target.files[0];this.fileReader.onloadend=function(){n.s_result_img=n.fileReader.result};this.fileReader.readAsDataURL(t)}else{this.presentToast("Please select an image file(jpg or pdf)")}};e.prototype.setCastImg=function(e){var n=this;if(e.target.files[0].type=="image/jpeg"||e.target.files[0].type=="application/pdf"){var t=e.target.files[0];this.fileReader.onloadend=function(){n.s_cast_cert_img=n.fileReader.result};this.fileReader.readAsDataURL(t)}else{this.presentToast("Please select an image file(jpg or pdf)")}};e.prototype.setStudentImg=function(e){var n=this;if(e.target.files[0].type=="image/jpeg"||e.target.files[0].type=="image/png"){var t=e.target.files[0];this.fileReader.onloadend=function(){n.s_image=n.fileReader.result};this.fileReader.readAsDataURL(t)}else{this.presentToast("Please select an image file(jpg or png)")}};e.prototype.studentLogin=function(){return __awaiter(this,void 0,void 0,(function(){var e,n;return __generator(this,(function(t){switch(t.label){case 0:if(!(this.s_id&&this.s_pass))return[3,3];return[4,fetch("http://104.43.21.203:1337/students?s_reg_number="+this.s_id)];case 1:e=t.sent();return[4,e.json()];case 2:n=t.sent();if(n&&n.length>0){if(this.s_pass==n[0].s_password){this.presentToast("You are successfully logged in");window.location.assign("/student-dashboard");window.localStorage.setItem("user_details",JSON.stringify(n))}else{this.presentToast("Wrong password")}}else if(n&&n.length==0){this.presentToast("You are not registered")}t.label=3;case 3:return[2]}}))}))};e.prototype.studentRegistration=function(){return __awaiter(this,void 0,void 0,(function(){var e,n,t,s,i;return __generator(this,(function(o){switch(o.label){case 0:if(!(this.s_name&&this.s_guad_name&&this.s_res_address&&this.s_res_pin&&this.s_sch_name&&this.s_sch_address&&this.s_sch_pin&&this.s_reg_number&&this.s_cast&&this.s_ph_number&&this.s_password&&this.s_first_lang_no&&this.s_sec_lang_no&&this.s_math_no&&this.s_phy_sc_no&&this.s_life_sc_no&&this.s_history_no&&this.s_geography_no&&this.s_op_sub_no&&this.s_result_img&&this.s_cast_cert_img&&this.s_image))return[3,9];if(!(this.s_password==this.s_con_password))return[3,7];return[4,fetch("http://104.43.21.203:1337/students?s_reg_number="+this.s_reg_number)];case 1:e=o.sent();return[4,e.json()];case 2:n=o.sent();if(!(n&&n.length==0))return[3,5];t={s_name:this.s_name,s_guad_name:this.s_guad_name,s_res_address:this.s_res_address,s_res_pin:this.s_res_pin.toString(),s_sch_name:this.s_sch_name,s_sch_address:this.s_sch_address,s_sch_pin:this.s_sch_pin.toString(),s_reg_number:this.s_reg_number,s_cast:this.s_cast,s_ph_number:this.s_ph_number.toString(),s_alt_ph_number:this.s_alt_ph_number?this.s_alt_ph_number.toString():null,s_email:this.s_email,s_password:this.s_password,s_first_lang_no:this.s_first_lang_no.toString(),s_sec_lang_no:this.s_sec_lang_no.toString(),s_math_no:this.s_math_no.toString(),s_phy_sc_no:this.s_phy_sc_no.toString(),s_life_sc_no:this.s_life_sc_no.toString(),s_history_no:this.s_history_no.toString(),s_geography_no:this.s_geography_no.toString(),s_op_sub_no:this.s_op_sub_no.toString(),s_result_img:this.s_result_img,s_cast_cert_img:this.s_cast_cert_img,s_image:this.s_image};return[4,fetch("http://104.43.21.203:1337/students",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})];case 3:s=o.sent();return[4,s.json()];case 4:i=o.sent();console.log("response",i);if(i&&i.length>0){this.presentToast("You are successfully registered");window.location.assign("/student-dashboard");window.localStorage.setItem("user_details",JSON.stringify(i))}else{this.presentToast("There is some error")}return[3,6];case 5:if(n&&n.length>0){this.presentToast("Candidate with this registration number already exist")}o.label=6;case 6:return[3,8];case 7:this.presentToast("Password does not match Confirm Password");o.label=8;case 8:return[3,10];case 9:this.presentToast("Please input the required fields properlly");o.label=10;case 10:return[2]}}))}))};e.prototype.segmentChange=function(e){if(e.target.value=="s_login"){document.getElementById("reg_form").style.display="none";document.getElementById("login_form").style.display="block"}else if(e.target.value=="s_reg"){document.getElementById("login_form").style.display="none";document.getElementById("reg_form").style.display="block"}};e.prototype.presentToast=function(e){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(t){switch(t.label){case 0:return[4,s.create({message:e,duration:2e3})];case 1:n=t.sent();n.present();return[2]}}))}))};e.prototype.render=function(){var e=this;return[t("ion-content",null,t("div",{class:"header_sec"},t("ion-img",{src:"assets/icon/logo.png"}),t("ion-button",{color:"secondary",href:"/school-registration"},"Register or Login Your School"),t("div",{class:"search_sec"},t("ion-searchbar",{placeholder:"Search by school or student name"}),t("h2",null,"No pressure of form fillup. Hassle free admission"))),t("ion-card",{class:"main_body"},t("ion-segment",{onIonChange:function(n){return e.segmentChange(n)},value:"s_login"},t("ion-segment-button",{value:"s_login"},t("ion-label",null,"LOGIN")),t("ion-segment-button",{value:"s_reg"},t("ion-label",null,"REGISTRATION"))),t("div",{id:"login_form"},t("ion-list",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Registration Number"),t("ion-input",{name:"s_id",onInput:function(n){return e.changeValue(n)},placeholder:"e.g. SAHEB123456",type:"text"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Password"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_pass",placeholder:"********",type:"password"}))),t("ion-button",{expand:"full",onClick:function(){return e.studentLogin()}},"SUBMIT")),t("div",{id:"reg_form"},t("ion-list",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Student Name"),t("ion-input",{name:"s_name",onInput:function(n){return e.changeValue(n)},placeholder:"e.g. Saheb Maity",type:"text"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Guardian Name"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_guad_name",placeholder:"e.g. Samrat Maity",type:"text"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Rasidential Address"),t("ion-textarea",{onInput:function(n){return e.changeValue(n)},name:"s_res_address",placeholder:"e.g. Nopkala, Chandrakona Road"})),t("ion-item",null,t("ion-label",{position:"stacked"},"PIN Code"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_res_pin",placeholder:"e.g. 123456",type:"number"})),t("ion-item",null,t("ion-label",{position:"stacked"},"School Name"),t("ion-input",{name:"s_sch_name",onInput:function(n){return e.changeValue(n)},placeholder:"e.g. Nopkala High School",type:"text"})),t("ion-item",null,t("ion-label",{position:"stacked"},"School Address"),t("ion-textarea",{onInput:function(n){return e.changeValue(n)},name:"s_sch_address",placeholder:"e.g. Nopkala, Chandrokana Road"})),t("ion-item",null,t("ion-label",{position:"stacked"},"School PIN Code"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_sch_pin",placeholder:"e.g. 123456",type:"number"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Madhyamik Registration Number"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_reg_number",placeholder:"e.g. 11111111111",type:"text"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Cast"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_cast",placeholder:"e.g. OBC",type:"text"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Phone Number"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_ph_number",placeholder:"e.g. 1234567890",type:"number"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Alternative Phone Number(Optional)"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_alt_ph_number",placeholder:"e.g. 1234567890",type:"number"})),t("ion-item",null,t("ion-label",{position:"stacked"},"E-mail ID(Optional)"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_email",placeholder:"e.g. sahebmaity90@gmail.com",type:"email"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Create Password(Min 6 carecter)"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_password",placeholder:"********",type:"password"})),t("ion-item",null,t("ion-label",{position:"stacked"},"Confirm Password"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_con_password",placeholder:"********",type:"password"}))),t("ion-grid",null,t("h3",null,"Subject wise number"),t("ion-row",null,t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"1st Language"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_first_lang_no",placeholder:"e.g. 91",type:"number"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"2nd Language"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_sec_lang_no",placeholder:"e.g. 91",type:"number"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Mathametics"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_math_no",placeholder:"e.g. 91",type:"number"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Physical Science"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_phy_sc_no",placeholder:"e.g. 91",type:"number"})))),t("ion-row",null,t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Life Science"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_life_sc_no",placeholder:"e.g. 91",type:"number"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"History"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_history_no",placeholder:"e.g. 91",type:"number"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Geography"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_geography_no",placeholder:"e.g. 91",type:"number"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Physical Education(optional sub)"),t("ion-input",{onInput:function(n){return e.changeValue(n)},name:"s_op_sub_no",placeholder:"e.g. 91",type:"number"}))))),t("ion-grid",null,t("h3",null,"Documents Upload"),t("ion-row",null,t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Passport Size Photo"),t("ion-img",{class:"upload_img",onClick:function(){return e.openImgInput("student_img")},src:"assets/icon/uploadIcon.jpg"}),t("input",{type:"file",id:"student_img",onChange:function(n){return e.setStudentImg(n)},accept:"image/png, image/jpeg"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Madhyamik Result"),t("ion-img",{class:"upload_img",onClick:function(){return e.openImgInput("result_img")},src:"assets/icon/uploadIcon.jpg"}),t("input",{type:"file",id:"result_img",onChange:function(n){return e.setResultImg(n)},accept:"application/pdf, image/jpeg"}))),t("ion-col",null,t("ion-item",null,t("ion-label",{position:"stacked"},"Cast Certificate"),t("ion-img",{class:"upload_img",onClick:function(){return e.openImgInput("cast_cert_img")},src:"assets/icon/uploadIcon.jpg"}),t("input",{type:"file",id:"cast_cert_img",onChange:function(n){return e.setCastImg(n)},accept:"application/pdf, image/jpeg"}))))),t("ion-button",{expand:"full",onClick:function(){return e.studentRegistration()}},"Register"))))]};return e}());o.style=i}}}));